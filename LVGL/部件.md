# 标签部件lv_label

## 组成部分

- 主体
- 滚动条
- 选中的文本

## 创建

```c
lv_obj_t *label = lv_label_create(lv_scr_act());
```

## 设置文本

### 直接设置文本-动态分配

```c
lv_label_set_text(label,"Hello!\n");
```

### 直接设置文本-存放在指定缓冲区中

优点：占用内存小

缺点：缓冲区不稳定，可能会被释放，也可能缓冲区是只读的，在不熟悉缓冲区的情况下谨慎使用

```c
lv_label_set_text_static(label,"Lvgl\n");
```

### 格式化设置文本-类似于printf

```c
lv_label_set_text_fmt(label,"V:%d",100);
```

## 设置文本样式

### 背景颜色

在标签部件中，背景透明度是默认透明的，所以要设置背景颜色就要先设置透明度

```c
lv_obj_t *label = lv_label_create(lv_scr_act());
lv_label_set_text(label,"Hello Lvgl! ");
lv_obj_set_style_bg_color(label,lv_color_hex(0xFF0000),LV_PART_MAIN );
//lv_obj_set_style_line_color(line,lv_palette_main(LV_PALETTE_ORANGE),LV_PART_MAIN);
lv_obj_set_style_bg_opa(label,255,LV_STATE_DEFAULT);
```

![image-20250408194350045](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504081943084.png)

### 字体大小

要现在lv_conf.h中把字体宏定义打开

```c
lv_obj_set_style_text_font(label,&lv_font_montserrat_40,LV_PART_MAIN );
```

### 字体颜色

```c
		lv_obj_set_style_text_color(label,lv_color_hex(0x0000FF),LV_PART_MAIN );
```

### 设置个别字体的颜色

***要先开启重新着色功能***

```c
		lv_label_set_recolor(label,true);
		lv_label_set_text(label,"Hello #0000FF Lvgl#!");//颜色后面要有一个空格
```

## 设置长文本模式

当这标签没有设置长度和宽度的时候, 会自动扩展为文本的大小, 如果设置长度和宽度的话，超出标签的大小后想要正常显示就需要设置这一个标签的长文本模式

```c
enum {
    LV_LABEL_LONG_WRAP,             /*超过的裁剪*/
    LV_LABEL_LONG_DOT,              /*将label右下角的最后三个字符改为...（则会修改缓冲区的内容）*/
    LV_LABEL_LONG_SCROLL,           /*来回滚动*/
    LV_LABEL_LONG_SCROLL_CIRCULAR,  /*循环滚动*/
    LV_LABEL_LONG_CLIP,             /*裁剪掉部件外面的*/
};
typedef uint8_t lv_label_long_mode_t;
```

```c
lv_obj_t *label = lv_label_create(lv_scr_act());
lv_label_set_text(label,"Hello Lvgl! Hello Lvgl! Hello Lvgl! Hello Lvgl! ");//要换行就直接\n
lv_obj_set_size(label,240,100);
lv_label_set_long_mode(label,LV_LABEL_LONG_SCROLL_CIRCULAR);	
```

## 设置阴影

实际是把这一个文本绘制两遍, 后面的那一个颜色比较浅

```c
static void lv_example_label_3(void)
{
    lv_obj_t* label = lv_label_create(lv_scr_act());                                /* 定义并创建标签 */
    lv_label_set_text_fmt(label, "Label can set text like %s", "printf");           /* 设置标签文本 */
    lv_obj_set_style_text_font(label, font, LV_PART_MAIN);                          /* 设置标签文本字体 */
    lv_obj_set_width(label, scr_act_width() / 3);                                   /* 设置标签宽度 */
    lv_obj_align(label, LV_ALIGN_CENTER, scr_act_width() / 3, 0);                   /* 设置标签位置 */
    lv_obj_set_style_text_align(label, LV_TEXT_ALIGN_CENTER, LV_PART_MAIN);         /* 设置标签文本对齐方式 */

    lv_obj_t* label_shadow = lv_label_create(lv_scr_act());                         /* 定义并创建阴影标签 */
    lv_label_set_text(label_shadow, lv_label_get_text(label));                      /* 设置标签文本 */
    lv_obj_set_style_text_font(label_shadow, font, LV_PART_MAIN);                   /* 设置标签文本字体 */
    lv_obj_set_width(label_shadow, scr_act_width() / 3);                            /* 设置标签宽度 */
    lv_obj_set_style_text_opa(label_shadow, LV_OPA_30, LV_PART_MAIN);               /* 设置标签文本透明度 */
    lv_obj_set_style_text_color(label_shadow, lv_color_black(), LV_PART_MAIN);      /* 设置标签文本颜色 */
    lv_obj_set_style_text_align(label_shadow, LV_TEXT_ALIGN_CENTER, LV_PART_MAIN);  /* 设置标签文本对齐方式 */
    lv_obj_align_to(label_shadow, label, LV_ALIGN_TOP_LEFT, 3, 3);                  /* 设置标签位置 */
}
```

# 按钮部件lv_button

## 组成部分

主体(LV_PART_MAIN)

## 创建&设置样式

```c
		lv_obj_t *btn = lv_btn_create(lv_scr_act());
		lv_obj_set_size(btn,100,100);
		lv_obj_set_align(btn,LV_ALIGN_CENTER);
		lv_obj_set_style_bg_color(btn,lv_color_hex(0xFF0000),LV_STATE_PRESSED);
```

## 切换状态

```c
lv_obj_add_flag(btn,LV_OBJ_FLAG_CHECKABLE);
```

## 设置事件

当按钮的状态值发生变化后才会触发回调，所以要是想要使用，就要先把上面的切换状态开启

```c
lv_obj_add_event_cb(btn,my_enent_cb,LV_EVENT_VALUE_CHANGED,NULL);
```

# 开关部件lv_switch

常用于控制某个功能的开关，可以直接显示被控对象的状态

## 组成部分

- 主体（在开启状态下主体是看不到的，被指示器覆盖掉了）LV_PART_MAIN
- 手柄LV_PART_KNOB
- 指示器（在关闭的状态下指示器是看不到的，被主体覆盖掉了）LV_PART_INDICATOR

## 创建&设置样式

```c
lv_obj_t *switch1 = lv_switch_create(lv_scr_act());
lv_obj_set_style_bg_color(switch1,lv_color_hex(0xFF0000),LV_PART_MAIN);//主体,关闭状态下的颜色
lv_obj_set_style_bg_color(switch1,lv_color_hex(0x00FF00),LV_PART_KNOB);//手柄，圆圈的颜色
lv_obj_set_style_bg_color(switch1,lv_color_hex(0xFFFF00),LV_STATE_CHECKED|LV_PART_INDICATOR);//指示器，打开之后的颜色
lv_obj_set_align(switch1,LV_ALIGN_CENTER);
```

## 添加清除开关的状态

```c
			lv_obj_add_state(switch1,LV_STATE_CHECKED);//改变默认状态为打开
			lv_obj_add_state(switch1,LV_STATE_DISABLED);//设置不可修改状态
			lv_obj_clear_state(switch1,LV_STATE_CHECKED);//清除默认状态为打开，此时默认状态是关闭
```

## 获取开关状态

```c
lv_obj_has_state(switch1, LV_STATE_CHECKED)//判断开关是否是打开状态，LV_STATE_CHECKED表示打开
```

# 复选框部件lv_checkbox

常用于选择某个内容的开启和关闭，可以理解为自带标签的开关

## 组成部分

- 主体LV_PART_MAIN
- 指示器LV_PART_INDICATOR

## 创建&设置样式

```c
				lv_obj_t *checkbox = lv_checkbox_create(lv_scr_act());//创建复选框
				lv_obj_set_align(checkbox,LV_ALIGN_CENTER);//居中对齐
				lv_checkbox_set_text(checkbox,"remember the password");
				//lv_checkbox_set_text_static(cb, txt);//静态文本
				lv_obj_set_style_pad_column(checkbox,5,LV_STATE_DEFAULT);//设置文本和框之间的间距
				lv_obj_set_style_text_color(checkbox,lv_color_hex(0x00FF00),LV_PART_MAIN);//设置文本颜色
				lv_obj_set_style_bg_color(checkbox,lv_color_hex(0xFF0000),LV_PART_INDICATOR);//设置指示器默认状态下的背景颜色
```



## 添加清除复选框的状态

```c
			lv_obj_add_state(checkbox,LV_STATE_CHECKED);//改变默认状态为选中
			lv_obj_add_state(checkbox,LV_STATE_DISABLED);//设置不可修改状态
			lv_obj_clear_state(checkbox,LV_STATE_CHECKED);//清除默认状态为选中，此时默认状态是未选中
```



## 获取复选框的状态

```c
lv_obj_has_state(checkbox, LV_STATE_CHECKED)//判断开关是否是选中状态，LV_STATE_CHECKED表示打开
```

# 进度条部件lv_bar

## 组成部分

- 主体LV_PART_MAIN
- 指示器LV_PART_INDICATOR

## 创建&设置样式

```c
				lv_obj_t *bar = lv_bar_create(lv_scr_act());
				lv_obj_set_align(bar,LV_ALIGN_CENTER);
				lv_obj_set_style_bg_color(bar,lv_color_hex(0xFF00FF),LV_PART_INDICATOR | LV_STATE_PRESSED);
				lv_obj_set_style_bg_color(bar,lv_color_hex(0xFF00FF),LV_PART_MAIN);
```

## 设置大小、当前值、范围值

```c
				lv_obj_set_size(bar,200,50);
				lv_bar_set_range(bar,-100,100);//范围设置要放在当前值之前
				lv_obj_set_style_anim_time(bar,500,LV_STATE_DEFAULT);//动画时间设置要放在当前值之前
				lv_bar_set_value(bar,100,LV_ANIM_ON);
```

## 设置模式、起始值

```c
lv_bar_set_mode(bar,LV_BAR_MODE_SYMMETRICAL);//从0开始绘制

lv_bar_set_mode(bar,LV_BAR_MODE_RANGE);
lv_bar_set_start_value(bar,-100,LV_ANIM_ON);
```

```c
enum {
    LV_BAR_MODE_NORMAL,			/*默认模式*/
    LV_BAR_MODE_SYMMETRICAL,	/*从0开始绘制到当前值*/
    LV_BAR_MODE_RANGE			/*允许设置初始值，但初始值必须小于当前值*/
};
```

## 注意事项

- 进度条高度大于宽度的时候，会变成垂直方向的
- 动画时间的设置需要放在当前值设置之前。否则看不到动画效果
- 动画时间指的是旧值刷新到新值的绘图时间，不是现实中当前值变化所需的时间

# 加载器部件lv_spinner

常用于提示当前任务正在加载

## 组成部分

- 主体LV_PART_MAIN
- 指示器LV_PART_INDICATOR
- 手柄：LV_PART_KNOB(指示器的头部有一个小圆圈，一般不会修改它)

## 创建&设置样式

```c
				lv_obj_t *spinner = lv_spinner_create(lv_scr_act(),3000,60); //旋转一周所需要的时间，指示器长度
				lv_obj_set_style_arc_color(spinner,lv_color_hex(0xFF0000),LV_PART_MAIN);
				lv_obj_set_style_arc_color(spinner,lv_color_hex(0xFFFF00),LV_PART_INDICATOR);
				lv_obj_set_style_arc_width(spinner,20,LV_PART_MAIN);//设置主体宽度
				lv_obj_set_style_arc_width(spinner,20,LV_PART_INDICATOR);//设置指示器宽度
```

# LED部件

## 组成部分

- 主体LV_PART_MAIN

## 创建&设置样式

不同版本的led样式不一样

```c
				lv_obj_t *led = lv_led_create(lv_scr_act());
				lv_led_set_color(led,lv_color_hex(0x00FF00));
				lv_led_set_brightness(led,255);//默认亮度就是255
				lv_obj_center(led);
				lv_obj_set_size(led,100,100);
```

## 切换状态

```c
				lv_led_on(led);
				lv_led_off(led);
				lv_led_toggle(led);
```

# 列表部件lv_list

常用于多选一的场景，默认展现多个选项

## 组成部分

- 主体LV_PART_MAIN
- 滚动条LV_PART_SCROLLBAR

## 创建&设置样式

```c
				lv_obj_t *list = lv_list_create(lv_scr_act());//创建
				lv_obj_center(list);//对齐
				lv_obj_set_style_bg_color(list,lv_color_hex(0x0000FF),LV_PART_MAIN);//主体设置颜色
				lv_obj_set_size(list,200,300);//设置大小
```

## 添加列表文本和按钮

```c
				lv_list_add_text(list,"Settings");
				lv_obj_t *btn1 = lv_list_add_btn(list,LV_SYMBOL_WIFI,"WIFI");
				lv_obj_t *btn2 = lv_list_add_btn(list,LV_SYMBOL_BLUETOOTH,"BLUETOOTH");
				lv_obj_t *btn3 = lv_list_add_btn(list,LV_SYMBOL_SD_CARD,"SD");
				lv_list_add_text(list,"BOOK");
```

![image-20250409223942087](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504092239197.png)

## 获取列表按钮文本

```c
lv_list_get_btn_text(list,btn1);
```

## 为列表按钮添加状态

```c
				lv_obj_add_event_cb(btn1,my_enent_cb,LV_EVENT_CLICKED,NULL);
				lv_obj_add_event_cb(btn2,my_enent_cb,LV_EVENT_CLICKED,NULL);
				lv_obj_add_event_cb(btn3,my_enent_cb,LV_EVENT_CLICKED,NULL);

static void my_enent_cb(lv_event_t *e)
{
	lv_obj_add_state(e->target,LV_STATE_FOCUS_KEY);
}
```

# 下拉列表部件lv_dropdown

多选一，点开后可展现多个选项

[Drop-Down List (lv_dropdown) — LVGL documentation](https://docs.lvgl.io/master/details/widgets/dropdown.html#list)

## 组成部分

![image-20250409223857459](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504092239598.png)

## 创建&设置样式

```c
					lv_obj_t *dd = lv_dropdown_create(lv_scr_act());
					lv_obj_set_style_bg_color(dd,lv_color_hex(0x00FF00),LV_PART_MAIN);		
```

## 设置选项内容

```c
					lv_dropdown_set_options(dd,"a\nb\nc\nd");//动态模式，一次性添加多个选项，中间用\n隔开
					lv_dropdown_set_options_static(dd,"a\nb\nc\nd");//静态模式，一次性添加多个选项，中间用\n隔开
					lv_dropdown_set_option(dd,"e",4);//添加选项，索引从0开始，该函数不能使用静态的
```

## 设置当前所选项

```c
	lv_dropdown_set_selected(dd,4);//索引从0开始
```

## 获取选项索引和内容

```c
	lv_dropdown_get_selected(dd);//获取索引
	
	char buf[10];
	lv_dropdown_get_selected_str(dd,buf,sizeof(buf));//获取选项文本
```

## 设置方向和图标

```c
lv_dropdown_set_dir(dd,LV_DIR_TOP);//设置展开方向
lv_dropdown_set_symbol(dd,LV_SYMBOL_RIGHT);//设置图标箭头方向
```

# 滚轮部件lv_roller

用于多选一，以滚轮的方式展示

## 组成部分

- 主体LV_PART_MAIN
- 选项框LV_PART_SELECTED

## 创建&设置样式

```c
lv_obj_t *roller = lv_roller_create(lv_scr_act());lv_obj_center(roller);
lv_obj_set_style_bg_color(roller,lv_color_hex(0x00FF00),LV_PART_MAIN);
lv_obj_set_size(roller,100,200);
lv_obj_set_style_text_line_space(roller,10,LV_STATE_DEFAULT);//设置选项间隔
```

## 设置选项内容

```c
lv_roller_set_options(roller,"Zhang\nWang\nHe\nLi\nLiu\n",LV_ROLLER_MODE_NORMAL);//正常模式，无限循环模式内存占用比较大
```

## 设置当前所选项

```c
lv_roller_set_selected(roller,2,LV_ANIM_ON);//索引从0开始，若是开启动画，就会滑动到设置的选项
```

## 设置可见行数

```c
lv_roller_set_visible_row_count(roller,4);
```

## 获取选项内容

```c
lv_roller_get_selected(dd);//获取索引

char buf[10];
lv_roller_get_selected_str(dd,buf,sizeof(buf));//获取选项文本
```

# 滑块部件lv_slider

用于调节某个参数的值，以直线滑动的方式改变

## 组成部分

- 主体LV_PART_MAIN
- 指示器LV_PART_INDICATOR
- 旋钮（手柄）LV_PART_KNOB

## 创建&设置样式

```c
lv_obj_t * slider = lv_slider_create(lv_scr_act());
lv_obj_set_style_bg_color(slider,lv_color_hex(0x00FF00),LV_PART_MAIN);
lv_obj_set_style_bg_color(slider,lv_color_hex(0x00FFFF),LV_PART_INDICATOR);
lv_obj_set_style_bg_color(slider,lv_color_hex(0xFF0000),LV_PART_KNOB);
lv_obj_center(slider);
lv_obj_set_size(slider,200,20);
```

## 设置值

```c
lv_slider_set_value(slider,50,LV_ANIM_OFF);
lv_slider_set_range(slider,-100,100);
```

## 获取当前值

```c
lv_slider_get_value(slider);//获取当前值
```

## 模式设置

***和进度条一样***

![image-20250410124414560](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504101244670.png)

```c
enum {
    LV_SLIDER_MODE_NORMAL = LV_BAR_MODE_NORMAL,//从最左边
    LV_SLIDER_MODE_SYMMETRICAL = LV_BAR_MODE_SYMMETRICAL,//从0
    LV_SLIDER_MODE_RANGE = LV_BAR_MODE_RANGE//两个手柄，左值无法拉到右值右边
};

lv_slider_set_mode(slider,LV_SLIDER_MODE_SYMMETRICAL);
```

## 设置&获取左值

```c
lv_slider_set_mode(slider,LV_SLIDER_MODE_RANGE);
lv_slider_set_left_value(slider,-50,LV_ANIM_OFF);

lv_slider_get_left_value(slider);
```

# 圆弧部件lv_arc

以弧形滑动的形式来调节、显示某个参数的值

## 组成部分

- 主体（背景弧）LV_PART_MAIN
- 指示器（前景弧）LV_PART_INDICATOR
- 旋钮LV_PART_KNOB

![image-20250410145516673](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504101455769.png)

## 创建&设置样式

```c
lv_obj_t *arc = lv_arc_create(lv_scr_act());
lv_obj_set_size(arc,200,200);
lv_obj_center(arc);
lv_obj_set_style_bg_color(arc,lv_color_hex(0xFF0000),LV_PART_MAIN);
lv_obj_set_style_bg_color(arc,lv_color_hex(0xFFFF00),LV_PART_INDICATOR);
lv_obj_set_style_bg_color(arc,lv_color_hex(0x00FFFF),LV_PART_KNOB);					
```

## 设置范围和当前值

***设置范围要在设置当前值之前***

```c
lv_arc_set_range(arc,100,160);//这里设置的范围是指数值范围，即从起点到终点的数值范围值是100-160，而不是角度是100-160
lv_arc_set_value(arc,120);
```

## 设置前景&背景弧角度

```c
lv_arc_set_bg_angles(arc,90,45);//设置背景弧角度，背景弧角度设置要放在前景弧设置之前
lv_arc_set_angles(arc,90,360);//设置前景弧角度，这个函数不要与lv_arc_set_value函数混用，最好是使用lv_arc_set_value函数
```

## 设置旋转角度

```c
lv_arc_set_rotation(arc,180);
```

## 获取当前值

```c
lv_arc_get_value(arc);
```

## 设置模式&圆弧绘制速率

```c
enum {
    LV_ARC_MODE_NORMAL,//从最小值开始绘制
    LV_ARC_MODE_SYMMETRICAL,//从中间开始绘制
    LV_ARC_MODE_REVERSE//从最大值开始绘制
};

lv_arc_set_mode(arc,LV_ARC_MODE_REVERSE);
lv_arc_set_change_rate(arc,90);//90°/s
```

## 去掉某个部分/属性

```
lv_obj_remove_style(arc,NULL,LV_PART_KNOB);//去除旋钮
lv_obj_clear_flag(arc,LV_OBJ_FLAG_CLICKABLE);//去除可点击属性
```

# 线条部件lv_line

能够在一组坐标点之间依次绘制直线

![image-20250410152457368](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504101524464.png)

## 组成部分

- 主体LV_PART_MAIN

## 创建&设置样式

```c
static  lv_point_t line_points[] = {{150,50},{250,200},{50,200},{150,50}};

lv_obj_t *line = lv_line_create(lv_scr_act());
lv_obj_center(line);
lv_obj_set_style_line_color(line,lv_palette_main(LV_PALETTE_ORANGE),LV_PART_MAIN);
lv_line_set_points(line,line_points,4);//设置点位
lv_obj_set_style_line_width(line,8,LV_PART_MAIN);//设置宽度
lv_obj_set_style_line_rounded(line,true,LV_PART_MAIN);//设置圆角
```

## 设置坐标翻转

```c
lv_line_set_y_invert(line,true);//y轴翻转
```

## 设置正弦波

正点原子的代码

```c

#define SIN_POINTS_NUM   (200)                                  /* 正弦波坐标点数量 */

static lv_point_t sin_line_points[SIN_POINTS_NUM];              /* 正弦波坐标数组 */
static lv_point_t straigh_line_points[] = {{0,0},{100,0}};      /* 直线坐标数组 */

/**
 * @brief       产生正弦波坐标点
 * @param       maxval : 峰值
 * @param       samples: 坐标点的个数
 * @retval      无
 */
static void create_sin_buf(uint16_t maxval, uint16_t samples)
{
    uint16_t i;
    float y = 0;

    /*
     * 正弦波最小正周期为2π，约等于2 * 3.1415926
     * 曲线上相邻的两个点在x轴上的间隔 = 2 * 3.1415926 / 采样点数量
     */
    float inc = (2 * 3.1415926) / samples;                      /* 计算相邻两个点的x轴间隔 */

    for (i = 0; i < samples; i++)                               /* 连续产生samples个点 */
    {
        /*
         * 正弦波函数解析式：y = Asin(wx + φ）+ b
         * 计算每个点的y值，将峰值放大maxval倍，并将曲线向上偏移maxval到正数区域
         */
        y = maxval * sin(inc * i) + maxval;

        sin_line_points[i].x = 2 * i;                           /* 存入x轴坐标 */
        sin_line_points[i].y = y;                               /* 存入y轴坐标 */
    }
}
```

# 图片部件lv_img

## 组成部分

- 主体LV_PART_MAIN

## 创建&设置样式

```c
lv_obj_t *img = lv_img_create(lv_scr_act());
```

## 显示图片

![image-20250410164327253](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504101643362.png)

![image-20250410164336237](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504101643385.png)

把生成的.c文件放到工程文件夹中，然后声明之后就可以使用了

```c
//img.c
const lv_img_dsc_t img2 = {
  .header.cf = LV_IMG_CF_TRUE_COLOR,
  .header.always_zero = 0,
  .header.reserved = 0,
  .header.w = 240,
  .header.h = 320,
  .data_size = 76800 * LV_COLOR_SIZE / 8,
  .data = img2_map,
};
```

```c
LV_IMG_DECLARE(img2);//声明图片
lv_img_set_src(img,&img2);//设置图片源
lv_obj_center(img);
```

## 设置偏移

```c
lv_img_set_offset_x(img,100);//x轴偏移100
lv_img_set_offset_y(img,50);//y轴偏移50
```

## 设置颜色

很鸡肋的，像是加了一种滤镜，一般不用

```c
lv_obj_set_style_img_recolor(img,lv_palette_main(LV_PALETTE_BLUE),LV_PART_MAIN);//设置图片颜色就需要设置背景透明度
lv_obj_set_style_img_recolor_opa(img,150,LV_PART_MAIN);
```

## 调色函数

```c
static inline lv_color_t lv_color_make(uint8_t r, uint8_t g, uint8_t b)
{
    return _LV_COLOR_MAKE_TYPE_HELPER LV_COLOR_MAKE(r, g, b);
}
```

## 缩放和旋转

![image-20250410165229402](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504101652540.png)

```c
lv_img_set_zoom(img,128);//缩小1/2，256不变，512，放大1倍
lv_img_set_angle(img,1800);//旋转180°
```

## 例程——正点原子

要使用，则自己提供一个图片就行

```c
#include "LVGL/GUI_APP/lv_mainstart.h"
#include "lvgl.h"
#include <stdio.h>


/* 获取当前活动屏幕的宽高 */
#define scr_act_width() lv_obj_get_width(lv_scr_act())
#define scr_act_height() lv_obj_get_height(lv_scr_act())

/* 定义图片部件、滑块部件 */
static lv_obj_t *img;
static lv_obj_t *slider_zoom, *slider_angle, *slider_r, *slider_g, *slider_b, *slider_opa;

LV_IMG_DECLARE(img_gear);                     /* 声明图片 */


/**
 * @brief  滑块事件回调
 * @param  *e ：事件相关参数的集合，它包含了该事件的所有数据
 * @return 无
 */
static void slider_event_cb(lv_event_t *e)
{
    lv_img_set_zoom(img, lv_slider_get_value(slider_zoom));                                         /* 设置图片缩放 */
    lv_img_set_angle(img, lv_slider_get_value(slider_angle));                                       /* 设置图片旋转角度 */

    /* 设置图片重新着色 */
    lv_obj_set_style_img_recolor(img,
                                 lv_color_make(lv_slider_get_value(slider_r), lv_slider_get_value(slider_g), lv_slider_get_value(slider_b)),
                                 LV_PART_MAIN);

    lv_obj_set_style_img_recolor_opa(img, lv_slider_get_value(slider_opa), LV_PART_MAIN);           /* 设置重新着色透明度 */
}

/**
 * @brief  创建滑块
 * @param  color:颜色值
 * @return *slider：创建成功的滑块部件
 */
static lv_obj_t *my_slider_create(lv_color_t color)
{
    lv_obj_t *slider = lv_slider_create(lv_scr_act());                                              /* 创建滑块 */
    lv_obj_set_height(slider, scr_act_height() / 20);                                               /* 设置高度 */
    lv_obj_set_width(slider, scr_act_width() / 3);                                                  /* 设置宽度 */
    lv_obj_remove_style(slider, NULL, LV_PART_KNOB);                                                /* 移除旋钮 */
    lv_obj_set_style_bg_color(slider,color,LV_PART_INDICATOR);                                      /* 设置滑块指示器颜色 */
    lv_obj_set_style_bg_color(slider,color,LV_PART_MAIN);                                           /* 设置滑块主体颜色 */
    lv_obj_set_style_bg_opa(slider,100,LV_PART_MAIN);                                               /* 设置滑块主体透明度 */
    lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);                     /* 设置滑块回调 */
    return slider;
}

/**
 * @brief  图片部件实例
 * @param  无
 * @return 无
 */
static void lv_example_img(void)
{
    img = lv_img_create(lv_scr_act());                                                              /* 创建图片部件 */
    lv_img_set_src(img, &img_gear);                                                                 /* 设置图片源 */
    lv_obj_align(img, LV_ALIGN_CENTER, -scr_act_width() / 5, 0);                                    /* 设置图片位置 */
    lv_obj_update_layout(img);                                                                      /* 更新图片参数 */

    /* 图片缩放控制滑块 */
    slider_zoom = my_slider_create(lv_color_hex(0x989c98));                                         /* 创建滑块 */
    lv_slider_set_range(slider_zoom, 128, 512);                                                     /* 设置滑块的范围 */
    lv_slider_set_value(slider_zoom, 256, LV_ANIM_OFF);                                             /* 设置滑块的值 */
    lv_obj_align(slider_zoom, LV_ALIGN_CENTER, scr_act_width() / 4, -scr_act_height() / 4);         /* 设置滑块位置 */

    /* 旋转角度控制滑块 */
    slider_angle = my_slider_create(lv_color_hex(0x989c98));                                        /* 创建滑块 */
    lv_slider_set_range(slider_angle, 0, 3600);                                                     /* 设置滑块的范围 */
    lv_obj_align_to(slider_angle, slider_zoom, LV_ALIGN_OUT_BOTTOM_LEFT, 0, scr_act_height() / 20); /* 设置滑块位置 */

    /* 红色通道控制滑块 */
    slider_r = my_slider_create(lv_color_hex(0xff0000));                                            /* 创建滑块 */
    lv_slider_set_range(slider_r, 0, 255);                                                          /* 设置滑块的范围 */
    lv_obj_align_to(slider_r, slider_angle, LV_ALIGN_OUT_BOTTOM_LEFT, 0, scr_act_height() / 20);    /* 设置滑块位置 */

    /* 绿色通道控制滑块 */
    slider_g = my_slider_create(lv_color_hex(0x00ff00));                                            /* 创建滑块 */
    lv_slider_set_range(slider_g, 0, 255);                                                          /* 设置滑块的范围 */
    lv_obj_align_to(slider_g, slider_r, LV_ALIGN_OUT_BOTTOM_LEFT, 0, scr_act_height() / 20);        /* 设置滑块位置 */

    /* 蓝色通道控制滑块 */
    slider_b = my_slider_create(lv_color_hex(0x0000ff));                                            /* 创建滑块 */
    lv_slider_set_range(slider_b, 0, 255);                                                          /* 设置滑块的范围 */
    lv_obj_align_to(slider_b, slider_g, LV_ALIGN_OUT_BOTTOM_LEFT, 0, scr_act_height() / 20);        /* 设置滑块位置 */

    /* 着色透明度控制滑块 */
    slider_opa = my_slider_create(lv_color_hex(0x000000));                                          /* 创建滑块 */
    lv_slider_set_range(slider_opa, 0, 255);                                                        /* 设置滑块的范围 */
    lv_slider_set_value(slider_opa, 150, LV_ANIM_OFF);                                              /* 设置滑块的值 */
    lv_obj_align_to(slider_opa, slider_b, LV_ALIGN_OUT_BOTTOM_LEFT, 0, scr_act_height() / 20);      /* 设置滑块位置 */
}

/**
 * @brief  LVGL演示
 * @param  无
 * @return 无
 */
void lv_mainstart(void)
{
    lv_example_img();
}
```

# 色环部件lv_colorwheel

用于颜色选择

## 组成部分

- 主体LV_PART_MAIN
- 旋钮LV_PART_KNOB

## 创建&设置样式

```c
lv_obj_t *cw = lv_colorwheel_create(lv_scr_act(),false);//false不打开手柄重新着色功能,true表示手柄的颜色会随着我们选择的颜色而改变
lv_obj_set_size(cw,200,200);
lv_obj_center(cw);
```

## 设置&获取当前颜色

```c
static lv_obj_t *obj;
static void my_enent_cb(lv_event_t *e)
{
		lv_obj_set_style_bg_color(obj,lv_colorwheel_get_rgb(e->target),LV_PART_MAIN);//获取色环选中的颜色

}
	
lv_obj_set_style_arc_width(cw,20,LV_PART_MAIN);//设置色环的宽度
lv_colorwheel_set_rgb(cw,lv_color_hex(0xFFFF12));//设置色环选择的颜色
	
lv_obj_add_event_cb(cw,my_enent_cb,LV_EVENT_VALUE_CHANGED,NULL);
	
obj = lv_obj_create(cw);
lv_obj_set_size(obj,100,100);
lv_obj_center(obj);
lv_obj_set_style_radius(obj,LV_RADIUS_CIRCLE,LV_PART_MAIN);//设置圆角,LV_RADIUS_CIRCLE越大，圆角弧度越大
```

## 设置色环模式

```c
enum {
    LV_COLORWHEEL_MODE_HUE,//色相
    LV_COLORWHEEL_MODE_SATURATION,//饱和度
    LV_COLORWHEEL_MODE_VALUE//明度
};

lv_colorwheel_set_mode(cw,LV_COLORWHEEL_MODE_VALUE);//设置色环的模式，默认是调整颜色的色相，经过长按然后往色环里面移动的话会在三种模式中切换
lv_colorwheel_set_mode_fixed(cw,true);//固定色环的模式
```

![image-20250411173935046](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504111739223.png)

# 按钮矩阵部件lv_btnmatrix

轻量级的按钮矩阵按键，每一个按钮只能用8个字节，之前的按钮部件要占用100多个字节

## 组成部分

- 主体LV_PART_MAIN
- 按钮LV_PART_ITEMS

## 创建&设置样式

```c
lv_obj_t *btnmatrix = lv_btnmatrix_create(lv_scr_act());
lv_obj_center(btnmatrix);
lv_obj_set_size(btnmatrix,200,200);
lv_obj_set_style_bg_color(btnmatrix,lv_palette_main(LV_PALETTE_BLUE),LV_STATE_PRESSED|LV_PART_ITEMS);
lv_obj_set_style_bg_color(btnmatrix,lv_palette_main(LV_PALETTE_PURPLE),LV_PART_MAIN);

lv_obj_set_style_border_width(btnmatrix,0,LV_PART_MAIN);//去除外部的边框
lv_obj_set_style_bg_opa(btnmatrix,0,LV_PART_MAIN);//设置背景全透明，这样背景颜色就没了
lv_obj_set_style_bg_opa(btnmatrix,0,LV_PART_ITEMS);//设置按钮背景全透明，这样按钮的颜色就没了
lv_obj_set_style_shadow_width(btnmatrix,0,LV_PART_ITEMS);//去除按钮阴影

```

## 设置按钮

```c
static const char *map[] = {"btn1","\n","btn2","btn3",""};//定义矩阵按钮数组，最后一个必须为空
lv_btnmatrix_set_map(btnmatrix,map);//设置按钮	
lv_btnmatrix_set_btn_width(btnmatrix,1,2);//设置索引为1(从0开始)的按钮的宽度 1~7,默认为1
```

## 获取

```c
static void my_enent_cb(lv_event_t *e)
{
	uint8_t id = lv_btnmatrix_get_selected_btn(e->target);
	lv_btnmatrix_get_btn_text(e->target,id);
}

lv_obj_add_event_cb(btnmatrix,my_enent_cb,LV_EVENT_VALUE_CHANGED,NULL);
```

## 设置&清除属性

```c
enum {
    _LV_BTNMATRIX_WIDTH     = 0x0007,      /**< Reserved to stire the size units*/
    LV_BTNMATRIX_CTRL_HIDDEN     = 0x0008, /*隐藏属性*/
    LV_BTNMATRIX_CTRL_NO_REPEAT  = 0x0010, /*长按不重复触发*/
    LV_BTNMATRIX_CTRL_DISABLED   = 0x0020, /*失能按钮.*/
    LV_BTNMATRIX_CTRL_CHECKABLE  = 0x0040, /*允许状态切换.*/
    LV_BTNMATRIX_CTRL_CHECKED    = 0x0080, /*设置选中*/
    LV_BTNMATRIX_CTRL_CLICK_TRIG = 0x0100, /**< 1: Send LV_EVENT_VALUE_CHANGE on CLICK, 0: Send LV_EVENT_VALUE_CHANGE on PRESS*/
    LV_BTNMATRIX_CTRL_POPOVER    = 0x0200, /**< Show a popover when pressing this key*/
    LV_BTNMATRIX_CTRL_RECOLOR    = 0x1000, /*允许文本重新着色*/
    _LV_BTNMATRIX_CTRL_RESERVED  = 0x2000, /**< Reserved for later use*/
    LV_BTNMATRIX_CTRL_CUSTOM_1   = 0x4000, /**< Custom free to use flag*/
    LV_BTNMATRIX_CTRL_CUSTOM_2   = 0x8000, /**< Custom free to use flag*/
};

//这一个枚举可以用或操作
```

```c
static const char *map[] = {"btn1","\n","btn2","#FF0000 btn3#",""};//定义矩阵按钮数组，最后一个必须为空

lv_btnmatrix_set_btn_ctrl(btnmatrix,0,LV_BTNMATRIX_CTRL_DISABLED);//失能
lv_btnmatrix_set_btn_ctrl(btnmatrix,1,LV_BTNMATRIX_CTRL_CHECKABLE);//可状态切换
lv_btnmatrix_set_btn_ctrl(btnmatrix,2,LV_BTNMATRIX_CTRL_RECOLOR);//能够重新着色，直接在数组中添加颜色即可

lv_btnmatrix_clear_btn_ctrl(btnmatrix,2,LV_BTNMATRIX_CTRL_RECOLOR);	
lv_btnmatrix_set_btn_ctrl_all(btnmatrix,LV_BTNMATRIX_CTRL_CHECKABLE);
lv_btnmatrix_clear_btn_ctrl_all(btnmatrix,LV_BTNMATRIX_CTRL_CHECKABLE);

lv_btnmatrix_set_one_checked(btnmatrix,true);//设置单次选中，一次只能选中一个按钮
```

# 文本区域部件lv_textarea

文本输入框，用于输入内容

## 组成部分

- LV_PART_MAIN 主体
- LV_PART_SCROLLBAR 滚动条
- LV_PART_SELECTED 选中文本
- LV_PART_CURSOR 光标
- LV_PART_TEXTAREA_PLACEHOLDER 占位符(默认文字，一般用来提示要输入什么)

## 创建&设置样式

```c
	lv_obj_t *tt = lv_textarea_create(lv_scr_act());
 	lv_obj_set_size(tt,200,200);
```

## 添加&删除字符

```c
lv_textarea_add_text(tt,"Wangasdasasdasdasdsda");//添加文本,\n表示换行
lv_textarea_add_char(tt,'A');//添加字符

lv_obj_t *kb = lv_keyboard_create(lv_scr_act());//创建键盘固件
lv_keyboard_set_textarea(kb,tt);//关联键盘和文本框部件

lv_textarea_set_cursor_pos(tt,1);//设置默认的光标位置，即未人为移动光标之前 LV_TEXTAREA_CURSOR_LAST表示设置到最右侧


lv_textarea_del_char(tt);//删除光标右侧的字符
lv_textarea_del_char_forward(tt);//删除光标左侧的字符
```

## 设置模式

```c
lv_textarea_set_one_line(tt,true);//设置单行模式，长度超出文本框后可以滑动
lv_textarea_set_password_mode(tt,true);//设置密码模式,显示时间默认为1.5s
lv_textarea_set_password_show_time(tt,5000);//设置密码显示时间5s
```

## 设置限制

```c
lv_textarea_set_accepted_chars(tt,"1234567890");//设置接收的字符
lv_textarea_set_max_length(tt,6);//设置接收的字符
```

## 设置占位符

```c
lv_textarea_set_placeholder_text(tt,"password");//设置占位符
```



## 获取文本内容

```c
static void my_enent_cb(lv_event_t *e)
{
	const char *txt = lv_textarea_get_text(e->target);
}

lv_obj_add_event_cb(tt,my_enent_cb,LV_EVENT_VALUE_CHANGED,NULL);
```

## 对比文本内容

```c
	const char *txt = lv_textarea_get_text(e->target);
	if(strcmp(txt,"123456") == 0)
		LED1_TOGGLE;
```

## 实例（正点原子）

```c
/**
 ****************************************************************************************************
 * @file        lv_mainstart.c
 * @author      正点原子团队(ALIENTEK)
 * @version     V1.0
 * @date        2022-03-23
 * @brief       LVGL lv_textarea(文本区域) 实验
 * @license     Copyright (c) 2020-2032, 广州市星翼电子科技有限公司
 ****************************************************************************************************
 * @attention
 *
 * 实验平台:正点原子 STM32F103开发板
 * 在线视频:www.yuanzige.com
 * 技术论坛:www.openedv.com
 * 公司网址:www.alientek.com
 * 购买地址:openedv.taobao.com
 *
 ****************************************************************************************************
 */
 
#include "LVGL/GUI_APP/lv_mainstart.h"
#include "lvgl.h"
#include <stdio.h>


/* 获取当前活动屏幕的宽高 */
#define scr_act_width()  lv_obj_get_width(lv_scr_act())
#define scr_act_height() lv_obj_get_height(lv_scr_act())

static const lv_font_t *font;       /* 定义字体 */

static lv_obj_t *keyboard;          /* 键盘 */
static lv_obj_t *label_name;        /* 用户名正误提示标签 */
static lv_obj_t *label_pass;        /* 密码正误提示标签 */

/**
 * @brief  用户名文本框事件回调
 * @param  *e ：事件相关参数的集合，它包含了该事件的所有数据
 * @return 无
 */
static void name_event_cb(lv_event_t *e)
{
    lv_event_code_t code = lv_event_get_code(e);            /* 获取事件类型 */
    lv_obj_t *target = lv_event_get_target(e);              /* 获取触发源 */

    if(code == LV_EVENT_FOCUSED)                            /* 事件类型：被聚焦 */
    {
        lv_keyboard_set_textarea(keyboard, target);         /* 关联用户名文本框和键盘 */
    }
    else if(code == LV_EVENT_VALUE_CHANGED)                 /* 事件类型：文本框的内容发生变化 */
    {
        const char *txt = lv_textarea_get_text(target);     /* 获取文本框的文本 */

        if(strcmp(txt,"admin") == 0)                        /* 判断用户名是否正确 */
        {
            lv_label_set_text(label_name, LV_SYMBOL_OK);    /* 用户名正确，显示√ */
        }
        else
        {
            lv_label_set_text(label_name, "");              /* 用户名错误，不提示 */
        }
    }
}

/**
 * @brief  密码文本框事件回调
 * @param  *e ：事件相关参数的集合，它包含了该事件的所有数据
 * @return 无
 */
static void pass_event_cb(lv_event_t *e)
{
    lv_event_code_t code = lv_event_get_code(e);            /* 获取事件类型 */
    lv_obj_t *target = lv_event_get_target(e);              /* 获取触发源 */

    if(code == LV_EVENT_FOCUSED)                            /* 事件类型：被聚焦 */
    {
        lv_keyboard_set_textarea(keyboard, target);         /* 关联用户名文本框和键盘 */
    }
    else if(code == LV_EVENT_VALUE_CHANGED)                 /* 事件类型：文本框的内容发生变化 */
    {
        const char *txt = lv_textarea_get_text(target);     /* 获取文本框的文本 */

        if(strcmp(txt,"123456") == 0)                       /* 判断密码是否正确 */
        {
            lv_label_set_text(label_pass, LV_SYMBOL_OK);    /* 密码正确，显示√ */
        }
        else
        {
            lv_label_set_text(label_pass, "");              /* 密码错误，不提示 */
        }
    }
}

/**
 * @brief  例
 * @param  无
 * @return 无
 */
static void lv_example_textarea(void)
{

    /* 根据屏幕大小设置字体 */
    if (scr_act_width() <= 320)
    {
        font = &lv_font_montserrat_12;
    }
    else if (scr_act_width() <= 480)
    {
        font = &lv_font_montserrat_14;
    }
    else
    {
        font = &lv_font_montserrat_22;
    }

    /* 用户名文本框 */
    lv_obj_t *textarea_name = lv_textarea_create(lv_scr_act());                                     /* 创建文本框 */
    lv_obj_set_width(textarea_name, scr_act_width()/2);                                             /* 设置宽度 */
    lv_obj_set_style_text_font(textarea_name, font, LV_PART_MAIN);                                  /* 设置字体 */
    lv_obj_align(textarea_name, LV_ALIGN_CENTER, 0, -scr_act_height()/3 );                          /* 设置位置 */
    lv_textarea_set_one_line(textarea_name, true);                                                  /* 设置单行模式 */
    lv_textarea_set_max_length(textarea_name, 6);                                                   /* 设置输入字符的最大长度 */
    lv_textarea_set_placeholder_text(textarea_name, "user name");                                   /* 设置占位符 */
    lv_obj_add_event_cb(textarea_name, name_event_cb, LV_EVENT_ALL, NULL);                          /* 添加文本框事件回调 */

    /* 用户名正误提示标签 */
    label_name = lv_label_create(lv_scr_act());                                                     /* 创建标签 */
    lv_label_set_text(label_name, "");                                                              /* 默认不提示 */
    lv_obj_set_style_text_font(label_name, font, LV_PART_MAIN);                                     /* 设置字体 */
    lv_obj_align_to(label_name, textarea_name, LV_ALIGN_OUT_RIGHT_MID, 5, 0);                       /* 设置位置 */

    /* 密码文本框 */
    lv_obj_t *textarea_pass = lv_textarea_create(lv_scr_act());                                     /* 创建文本框 */
    lv_obj_set_width(textarea_pass, scr_act_width()/2);                                             /* 设置宽度 */
    lv_obj_set_style_text_font(textarea_pass, font, LV_PART_MAIN);                                  /* 设置字体 */
    lv_obj_align_to(textarea_pass, textarea_name, LV_ALIGN_OUT_BOTTOM_MID, 0, scr_act_height()/20); /* 设置位置 */
    lv_textarea_set_one_line(textarea_pass, true);                                                  /* 设置单行模式 */
    lv_textarea_set_password_mode(textarea_pass, true);                                             /* 设置密码模式 */
    lv_textarea_set_password_show_time(textarea_pass, 1000);                                        /* 设置密码显示时间 */
    lv_textarea_set_max_length(textarea_pass, 8);                                                   /* 设置输入字符的最大长度 */
    lv_textarea_set_placeholder_text(textarea_pass, "password");                                    /* 设置占位符 */
    lv_obj_add_event_cb(textarea_pass, pass_event_cb, LV_EVENT_ALL, NULL);                          /* 添加文本框事件回调 */

    /* 密码正误提示标签 */
    label_pass = lv_label_create(lv_scr_act());                                                     /* 创建标签 */
    lv_label_set_text(label_pass, "");                                                              /* 默认不提示 */
    lv_obj_set_style_text_font(label_pass, font, LV_PART_MAIN);                                     /* 设置字体 */
    lv_obj_align_to(label_pass, textarea_pass, LV_ALIGN_OUT_RIGHT_MID, 5, 0);                       /* 设置位置 */

    /* 键盘 */
    keyboard = lv_keyboard_create(lv_scr_act());                                                    /* 创建键盘 */
    lv_obj_set_size(keyboard, scr_act_width(), scr_act_height()/2);                                 /* 设置大小 */
}

/**
 * @brief  LVGL演示
 * @param  无
 * @return 无
 */
void lv_mainstart(void)
{
    lv_example_textarea();
}

```



# 键盘部件

本质上就是一个按钮矩阵部件

## 组成部分

- 主体LV_PART_MAIN
- 按钮LV_PART_ITEMS

## 创建&设置样式

```c
lv_obj_t *kb = lv_keyboard_create(lv_scr_act());//创建键盘固件
```

## 关联

```c
lv_obj_t *tt = lv_textarea_create(lv_scr_act());	
lv_keyboard_set_textarea(kb,tt);//关联键盘和文本框部件
```

## 设置弹窗

```

```

## 设置模式

```c
enum {
    LV_KEYBOARD_MODE_TEXT_LOWER,//小谢模式（默认）
    LV_KEYBOARD_MODE_TEXT_UPPER,//大写模式
    LV_KEYBOARD_MODE_SPECIAL,//特殊符号模式
    LV_KEYBOARD_MODE_NUMBER,//数字模式
    LV_KEYBOARD_MODE_USER_1,
    LV_KEYBOARD_MODE_USER_2,
    LV_KEYBOARD_MODE_USER_3,
    LV_KEYBOARD_MODE_USER_4,
};
//前三个模式可以互相切换，但是数字键盘模式只能用函数设置
lv_keyboard_set_mode(kb,LV_KEYBOARD_MODE_NUMBER);//设置数字键模式
```

## 实例-切换数字键（正点原子）

```c
/**
 ****************************************************************************************************
 * @file        lv_mainstart.c
 * @author      正点原子团队(ALIENTEK)
 * @version     V1.0
 * @date        2022-03-23
 * @brief       LVGL lv_keyboard(键盘) 实验
 * @license     Copyright (c) 2020-2032, 广州市星翼电子科技有限公司
 ****************************************************************************************************
 * @attention
 *
 * 实验平台:正点原子 STM32F103开发板
 * 在线视频:www.yuanzige.com
 * 技术论坛:www.openedv.com
 * 公司网址:www.alientek.com
 * 购买地址:openedv.taobao.com
 *
 ****************************************************************************************************
 */
 
#include "LVGL/GUI_APP/lv_mainstart.h"
#include "lvgl.h"
#include <stdio.h>


/* 获取当前活动屏幕的宽高 */
#define scr_act_width()  lv_obj_get_width(lv_scr_act())
#define scr_act_height() lv_obj_get_height(lv_scr_act())

/**
 * @brief  键盘事件回调
 * @param  *e ：事件相关参数的集合，它包含了该事件的所有数据
 * @return 无
 */
static void keyboard_event_cb(lv_event_t *e)
{
    lv_event_code_t code = lv_event_get_code(e);                            /* 获取事件类型 */
    lv_obj_t *target = lv_event_get_target(e);                              /* 获取触发源 */

    if(code == LV_EVENT_VALUE_CHANGED)
    {
        uint16_t id = lv_btnmatrix_get_selected_btn(target);                /* 当前版本没有提供键盘的索引获取函数，获取键盘按钮索引 */

        const char *txt = lv_btnmatrix_get_btn_text(target, id);            /* 获取按钮文本 */

        if(strcmp(txt, LV_SYMBOL_KEYBOARD) == 0)                            /* 判断是不是键盘图标被按下 */
        {
            if(lv_keyboard_get_mode(target) == LV_KEYBOARD_MODE_NUMBER)     /* 获取当前键盘模式，判断是否为数字模式 */
            {
                lv_keyboard_set_mode(target, LV_KEYBOARD_MODE_TEXT_LOWER);  /* 如果是数字模式，则切换为小写字母模式 */
            }
            else
            {
                lv_keyboard_set_mode(target, LV_KEYBOARD_MODE_NUMBER);      /* 不是数字模式，则切换为数字模式 */
            }
        }
    }
}

/**
 * @brief  键盘实例
 * @param  无
 * @return 无
 */
static void lv_example_keyboard(void)
{
    /* 文本框 */
    lv_obj_t *textarea = lv_textarea_create(lv_scr_act());                              /* 创建文本框 */
    lv_obj_set_size(textarea, scr_act_width() - 10, scr_act_height() / 2 - 10);         /* 设置大小 */
    lv_obj_align(textarea, LV_ALIGN_TOP_MID, 0, 0);                                     /* 设置位置 */
    
    /* 键盘 */
    lv_obj_t *keyboard = lv_keyboard_create(lv_scr_act());                              /* 创建键盘 */
    lv_keyboard_set_textarea(keyboard, textarea);                                       /* 关联键盘和文本框 */
    lv_obj_add_event_cb(keyboard, keyboard_event_cb, LV_EVENT_VALUE_CHANGED, NULL);     /* 设置键盘事件回调 */
}

/**
 * @brief  LVGL演示
 * @param  无
 * @return 无
 */
void lv_mainstart(void)
{
    lv_example_keyboard();
}

```

# 图片按钮部件lv_imgbtn

带有图片的按钮

## 组成部分

- 主体LV_PART_MAIN

## 创建&设置样式

```c
LV_IMG_DECLARE(img1);//声明图片
LV_IMG_DECLARE(img2);//声明图片	
lv_obj_t *imgbtn =  lv_imgbtn_create(lv_scr_act());	
lv_obj_set_size(imgbtn,100,150);
//改变颜色
lv_obj_set_style_img_recolor(imgbtn,lv_color_hex(0xF113ff),LV_STATE_DEFAULT);
lv_obj_set_style_img_recolor_opa(imgbtn,150,LV_STATE_DEFAULT);
```

## 设置状态

```c
typedef enum {
    LV_IMGBTN_STATE_RELEASED,//释放状态
    LV_IMGBTN_STATE_PRESSED,//按下状态
    LV_IMGBTN_STATE_DISABLED,//失能状态
    LV_IMGBTN_STATE_CHECKED_RELEASED,
    LV_IMGBTN_STATE_CHECKED_PRESSED,
    LV_IMGBTN_STATE_CHECKED_DISABLED,
    _LV_IMGBTN_STATE_NUM,
} lv_imgbtn_state_t;

lv_imgbtn_set_src(imgbtn,LV_IMGBTN_STATE_RELEASED,NULL,&img1,NULL);//设置某个状态的图片源
lv_imgbtn_set_src(imgbtn,LV_IMGBTN_STATE_PRESSED,NULL,&img2,NULL);//设置某个状态的图片源
lv_imgbtn_set_state(imgbtn,LV_IMGBTN_STATE_PRESSED);//设置状态
```

## 带有透明通道的图片

使用下面两行可以实现图片内部的颜色变化，就不用准备两张图片来设置两个状态了，而是在事件回调中设置图片颜色即可

```c
lv_obj_set_style_img_recolor(imgbtn,lv_color_hex(0xF113ff),LV_STATE_DEFAULT);
lv_obj_set_style_img_recolor_opa(imgbtn,150,LV_STATE_DEFAULT);
```

![image-20250412150923002](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504121509226.png)

# 选项卡部件lv_tabview

实现多页切换，用户可以在不同的页面里添加内容

## 组成部分

- 主体LV_PART_MAIN
- 按钮LV_PART_btnmatrix

## 创建&设置样式

```c
enum {
    LV_DIR_NONE     = 0x00,
    LV_DIR_LEFT     = (1 << 0),
    LV_DIR_RIGHT    = (1 << 1),
    LV_DIR_TOP      = (1 << 2),
    LV_DIR_BOTTOM   = (1 << 3),
    LV_DIR_HOR      = LV_DIR_LEFT | LV_DIR_RIGHT,
    LV_DIR_VER      = LV_DIR_TOP | LV_DIR_BOTTOM,
    LV_DIR_ALL      = LV_DIR_HOR | LV_DIR_VER,
};
```

```c
	lv_obj_t *tv = lv_tabview_create(lv_scr_act(),LV_DIR_TOP,50);//设置横条的位置，高度
	lv_obj_set_style_text_font(tv,&lv_font_montserrat_14,LV_STATE_DEFAULT);//设置字体

	lv_obj_t *tab1 = lv_tabview_add_tab(tv,"People");//添加选项卡
	lv_obj_t *tab2 = lv_tabview_add_tab(tv,"Unsiversity");
	lv_obj_t *tab3 = lv_tabview_add_tab(tv,"Class");
	
	lv_obj_t *t1_label = lv_label_create(tab1);//为选项卡添加内容
	lv_label_set_text(t1_label,"Zhang");
	lv_obj_t *t2_label = lv_label_create(tab2);//为选项卡添加内容
	lv_label_set_text(t2_label,"Swpu");
	lv_obj_t *t3_label = lv_label_create(tab3);//为选项卡添加内容
	lv_label_set_text(t3_label,"Secend");
	
	
	lv_tabview_set_act(tv,1,LV_ANIM_ON);
	lv_obj_set_style_anim_time(tv,2000,LV_STATE_DEFAULT);
	
	lv_obj_t *btn = lv_tabview_get_tab_btns(tv);//获取按钮部分
	//未选中的按钮
	lv_obj_set_style_bg_color(btn,lv_color_hex(0xb7472a),LV_PART_ITEMS|LV_STATE_DEFAULT);	//设置按钮背景颜色
	lv_obj_set_style_bg_opa(btn,200,LV_PART_ITEMS|LV_STATE_DEFAULT);//设置按钮背景透明度
	lv_obj_set_style_text_color(btn,lv_color_hex(0xf3f3f3),LV_PART_ITEMS|LV_STATE_DEFAULT);//设置文本颜色
	
	//选中的按钮
	lv_obj_set_style_bg_color(btn,lv_color_hex(0xe1e1e1),LV_PART_ITEMS|LV_STATE_CHECKED);	
	lv_obj_set_style_bg_opa(btn,200,LV_PART_ITEMS|LV_STATE_CHECKED);
	lv_obj_set_style_text_color(btn,lv_color_hex(0xb7472a),LV_PART_ITEMS|LV_STATE_CHECKED);
	lv_obj_set_style_border_width(btn,0,LV_PART_ITEMS|LV_STATE_CHECKED);//设置按钮边框为0
	
	//主体
	lv_obj_t *obj = lv_tabview_get_content(tv);//获取主体部分
	lv_obj_set_style_bg_color(obj,lv_color_hex(0x005500),LV_STATE_DEFAULT);	
	lv_obj_set_style_bg_opa(obj,255,LV_STATE_DEFAULT);

```

# 平铺视图部件

实现不同方向的页面切换，用户可以在中间添加内容![image-20250412154512203](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504121545422.png)

## 组成部分

- 主体LV_PART_MAIN
- 滚动条LV_PART_SCROLLBAR

## 创建&设置样式

```c
	lv_obj_t *tv = lv_tileview_create(lv_scr_act());
	lv_obj_t *tile1 = lv_tileview_add_tile(tv,0,0,LV_DIR_RIGHT);//列，行，允许滑动方向
	lv_obj_t *tile2 = lv_tileview_add_tile(tv,1,0,LV_DIR_LEFT);//列，行，允许滑动方向
	lv_obj_remove_style(tv,NULL,LV_PART_SCROLLBAR);//消除滚动条
```

## 添加页面和内容

```c
	//添加页面内容
	lv_obj_t *label = lv_label_create(tile1);
	lv_label_set_text(label,"Hello");
	
	lv_obj_update_layout(tv);//更新参数
	lv_obj_set_tile(tv,tile2,LV_ANIM_OFF);//设置当前显示页面
	lv_obj_set_tile_id(tv,1,0,LV_ANIM_OFF);//通过行列设置当前显示页面

```

## 实例（正点原子）

```c
#include "LVGL/GUI_APP/lv_mainstart.h"
#include "lvgl.h"
#include <stdio.h>


/* 获取当前活动屏幕的宽高 */
#define scr_act_width()  lv_obj_get_width(lv_scr_act())
#define scr_act_height() lv_obj_get_height(lv_scr_act())

static const lv_font_t *font;           /* 定义字体 */

/**
 * @brief  平铺视图实例
 * @param  无
 * @return 无
 */
static void lv_example_tileview(void)
{
    /* 根据屏幕宽度设置字体 */
    if (scr_act_width() <= 480)
    {
        font = &lv_font_montserrat_14;
    }
    else
    {
        font = &lv_font_montserrat_20;
    }

    /* 创建平铺视图页面 */
    lv_obj_t *tileview = lv_tileview_create(lv_scr_act());                                  /* 创建平铺视图 */

    lv_obj_t *tile_1 = lv_tileview_add_tile( tileview, 0, 0, LV_DIR_RIGHT );                /* 添加页面1 */
    lv_obj_t *tile_2 = lv_tileview_add_tile( tileview, 1, 0, LV_DIR_LEFT|LV_DIR_RIGHT );    /* 添加页面2 */
    lv_obj_t *tile_3 = lv_tileview_add_tile( tileview, 2, 0, LV_DIR_LEFT );                 /* 添加页面3 */

    /* 设置页面内容 */
    lv_obj_t *label_1 = lv_label_create(tile_1);                                            /* 创建标签 */
    lv_label_set_text(label_1, "Page_1");                                                   /* 设置文本内容 */
    lv_obj_set_style_text_font(label_1, font, LV_STATE_DEFAULT);                            /* 设置字体 */
    lv_obj_center(label_1);                                                                 /* 设置位置 */

    lv_obj_t *label_2 = lv_label_create(tile_2);                                            /* 创建标签 */
    lv_label_set_text(label_2, "Page_2");                                                   /* 设置文本内容 */
    lv_obj_set_style_text_font(label_2, font, LV_STATE_DEFAULT);                            /* 设置字体 */
    lv_obj_center(label_2);                                                                 /* 设置位置 */

    lv_obj_t *label_3 = lv_label_create(tile_3);                                            /* 创建标签 */
    lv_label_set_text(label_3, "Page_3");                                                   /* 设置文本内容 */
    lv_obj_set_style_text_font(label_3, font, LV_STATE_DEFAULT);                            /* 设置字体 */
    lv_obj_center(label_3);                                                                 /* 设置位置 */
    lv_obj_remove_style(tileview, NULL, LV_PART_SCROLLBAR);                                 /* 移除滚动条 */

    /* 左侧状态栏 */
    lv_obj_t *label_left = lv_label_create(lv_scr_act());                                   /* 创建标签 */
    lv_label_set_text(label_left, "AM 8:30" );                                              /* 设置文本内容 */
    lv_obj_set_style_text_font(label_left, font, LV_STATE_DEFAULT);                         /* 设置字体 */
    lv_obj_align(label_left, LV_ALIGN_TOP_LEFT, 10, 10);                                    /* 设置位置 */

    /* 右侧状态栏 */
    lv_obj_t *label_right = lv_label_create(lv_scr_act());                                  /* 创建标签 */
    lv_label_set_text(label_right, LV_SYMBOL_WIFI "   80% " LV_SYMBOL_BATTERY_3);           /* 设置文本内容 */
    lv_obj_set_style_text_font(label_right, font, LV_STATE_DEFAULT);                        /* 设置字体 */
    lv_obj_align(label_right, LV_ALIGN_TOP_RIGHT, -10, 10);                                 /* 设置位置 */
}

/**
 * @brief  LVGL演示
 * @param  无
 * @return 无
 */
void lv_mainstart(void)
{
    lv_example_tileview();
}
```

# 窗口部件lv_win

作为一个容器，展现不同功能的页面

## 组成部分

- 主体LV_PART_MAIN
- 头部(Header)

## 创建&设置样式

```c
	win = lv_win_create(lv_scr_act(),40);//头部高度
	lv_obj_set_size(win,200,150);
	lv_obj_center(win);
	lv_obj_set_style_border_width(win,1,LV_STATE_DEFAULT);//设置边框的宽度
	lv_obj_set_style_border_color(win,lv_color_hex(0x808080),LV_STATE_DEFAULT);//设置边框的颜色
	lv_obj_set_style_border_opa(win,100,LV_STATE_DEFAULT);//设置边框的透明度
	lv_obj_set_style_radius(win,20,LV_STATE_DEFAULT);//设置边框圆角
```

## 添加标题、按钮、主体

```c
	lv_obj_t *btnSetting = lv_win_add_btn(win,LV_SYMBOL_SETTINGS,20);//添加设置按钮，图像，宽度,按钮添加在标题的后面，则按钮就会向右边对齐，左边就向左边对齐
	lv_obj_set_style_bg_opa(btnSetting,0,LV_STATE_DEFAULT);//设置背景全透明
	lv_obj_set_style_shadow_width(btnSetting,0,LV_STATE_DEFAULT);//设置背景阴影宽度
	lv_obj_set_style_text_color(btnSetting,lv_color_hex(0x000000),LV_STATE_DEFAULT);//设置文本颜色

	lv_obj_t *title = lv_win_add_title(win,"Settings");//添加标题

	lv_obj_t *btnClose = lv_win_add_btn(win,LV_SYMBOL_CLOSE,20);//添加按钮，图像，宽度,按钮添加在标题的后面，则按钮就会向右边对齐，左边就向左边对齐
	lv_obj_set_style_bg_opa(btnClose,0,LV_STATE_DEFAULT);//设置背景全透明
	lv_obj_set_style_shadow_width(btnClose,0,LV_STATE_DEFAULT);//设置背景阴影宽度
	lv_obj_set_style_text_color(btnClose,lv_color_hex(0x000000),LV_STATE_DEFAULT);//设置文本颜色
	lv_obj_set_style_text_color(btnClose,lv_palette_main(LV_PALETTE_RED),LV_STATE_PRESSED);//设置文本颜色
	lv_obj_add_event_cb(btnClose,my_event_cb,LV_EVENT_CLICKED,NULL);
	
	lv_obj_t *content = lv_win_get_content(win);//获取主体
	lv_obj_t *label = lv_label_create(content);//添加标签
	lv_label_set_text(label,"Zhang");
```



## 主体实例（正点原子）

```c
    /*************************   第二部分：主体   ****************************/

    /* 主体背景 */
    lv_obj_t *content = lv_win_get_content(win);                                                /* 获取主体 */
    lv_obj_set_style_bg_color(content, lv_color_hex(0xffffff),LV_STATE_DEFAULT);                /* 设置背景颜色 */

    /* 音乐音量滑块 */
    lv_obj_t *slider_audio = lv_slider_create(content);                                         /* 创建滑块 */
    lv_obj_set_size(slider_audio, scr_act_width()/3, scr_act_height()/30);                      /* 设置大小 */
    lv_obj_align(slider_audio, LV_ALIGN_CENTER, 15, -scr_act_height()/14);                      /* 设置位置 */
    lv_slider_set_value(slider_audio, 50, LV_ANIM_OFF);                                         /* 设置当前值 */
    lv_obj_set_style_bg_color(slider_audio, lv_color_hex(0x787c78), LV_PART_MAIN);              /* 设置主体颜色 */
    lv_obj_set_style_bg_color(slider_audio, lv_color_hex(0xc3c3c3), LV_PART_INDICATOR);         /* 设置指示器颜色 */
    lv_obj_remove_style(slider_audio, NULL, LV_PART_KNOB);                                      /* 移除旋钮 */

    /* 音乐音量图标 */
    lv_obj_t *label_audio = lv_label_create(content);                                           /* 创建音量标签 */
    lv_label_set_text(label_audio, LV_SYMBOL_AUDIO);                                            /* 设置文本内容：音乐图标 */
    lv_obj_set_style_text_font(label_audio, font, LV_STATE_DEFAULT);                            /* 设置字体 */
    lv_obj_align_to(label_audio, slider_audio, LV_ALIGN_OUT_LEFT_MID, -scr_act_width()/40, 0);  /* 设置位置 */

    /* 闹钟音量滑块 */
    lv_obj_t *slider_bell = lv_slider_create(content);                                          /* 创建滑块 */
    lv_obj_set_size(slider_bell, scr_act_width()/3, scr_act_height()/30);                       /* 设置大小 */
    lv_obj_align(slider_bell, LV_ALIGN_CENTER, 15, scr_act_height()/14);                        /* 设置位置 */
    lv_slider_set_value(slider_bell, 50, LV_ANIM_OFF);                                          /* 设置当前值 */
    lv_obj_set_style_bg_color(slider_bell, lv_color_hex(0x787c78), LV_PART_MAIN);               /* 设置主体颜色 */
    lv_obj_set_style_bg_color(slider_bell, lv_color_hex(0xc3c3c3), LV_PART_INDICATOR);          /* 设置指示器颜色 */
    lv_obj_remove_style(slider_bell, NULL, LV_PART_KNOB);                                       /* 移除旋钮 */

    /* 闹钟音量图标 */
    lv_obj_t *label_bell = lv_label_create(content);                                            /* 创建音量标签 */
    lv_label_set_text(label_bell, LV_SYMBOL_BELL);                                              /* 设置文本内容：闹钟图标 */
    lv_obj_set_style_text_font(label_bell, font, LV_STATE_DEFAULT);                             /* 设置字体 */
    lv_obj_align_to(label_bell, slider_bell, LV_ALIGN_OUT_LEFT_MID, -scr_act_width()/40, 0);    /* 设置位置 */
```

# 消息框部件lv_msgbox

弹窗提示，常用于消息通知，确定操作

## 组成部分

- Background: [lv_obj](https://docs.lvgl.io/8.2/widgets/obj.html)
- Close button: [lv_btn](https://docs.lvgl.io/8.2/widgets/core/btn.html)
- Title and text: [lv_label](https://docs.lvgl.io/8.2/widgets/core/label.html)
- Buttons: [lv_btnmatrix](https://docs.lvgl.io/8.2/widgets/core/btnmatrix.html)

## 创建&设置样式

![image-20250412163650790](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504121636015.png)

```c
static const char *btns[] = {"Continue","Close",""};//lvgl规定最后一个要是空白的
lv_obj_t *msgbox = lv_msgbox_create(lv_scr_act(),"Notice","Do you want to continue?",btns,true);//标题，主题文本，按钮矩阵，选择是否需要关闭按钮

```



## 关闭

```c
lv_msgbox_close(msgbox);
```

## 获取按钮索引&文本

```c
lv_msgbox_get_active_btn(msgbox);//索引
lv_msgbox_get_active_btn_text(msgbox);//文本
```

## 实例（正点原子）

```c
#include "LVGL/GUI_APP/lv_mainstart.h"
#include "lvgl.h"
#include <stdio.h>


/* 获取当前活动屏幕的宽高 */
#define scr_act_width()  lv_obj_get_width(lv_scr_act())
#define scr_act_height() lv_obj_get_height(lv_scr_act())

static lv_obj_t *msgbox;                                                            /* 消息框 */
static lv_obj_t *slider_label;                                                      /* 音量百分比标签 */


/*************************  第一部分 音量调节滑块  ******************************/

/**
 * @brief  滑块事件回调
 * @param  *e ：事件相关参数的集合，它包含了该事件的所有数据
 * @return 无
 */
static void slider_event_cb(lv_event_t *e)
{
    lv_obj_t *target = lv_event_get_target(e);                                      /* 获取触发源 */
    lv_event_code_t code = lv_event_get_code(e);                                    /* 获取事件类型 */

    if(code == LV_EVENT_VALUE_CHANGED)
    {
        lv_label_set_text_fmt(slider_label, "%d%%", lv_slider_get_value(target));   /* 获取当前值，更新音量百分比 */

        if(lv_slider_get_value(target) > 80)                                        /* 音量大于80% */
        {
            lv_obj_clear_flag(msgbox, LV_OBJ_FLAG_HIDDEN);                          /* 清除消息框隐藏属性，出现弹窗提示 */
        }
    }
}

/**
 * @brief  音量调节滑块
 * @param  无
 * @return 无
 */
static void lv_example_slider(void)
{
    /* 滑块 */
    lv_obj_t * slider = lv_slider_create(lv_scr_act());                                 /* 创建滑块 */
    lv_obj_set_size(slider, scr_act_width() / 2, 20);                                   /* 设置大小 */
    lv_obj_center(slider);                                                              /* 设置位置 */
    lv_slider_set_value(slider, 50, LV_ANIM_OFF);                                       /* 设置当前值 */
    lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);         /* 添加事件 */

    /* 百分比标签 */
    slider_label = lv_label_create(lv_scr_act());                                       /* 创建百分比标签 */
    lv_label_set_text(slider_label, "50%");                                             /* 设置文本内容 */
    lv_obj_set_style_text_font(slider_label, &lv_font_montserrat_20, LV_STATE_DEFAULT); /* 设置字体 */
    lv_obj_align_to(slider_label, slider, LV_ALIGN_OUT_RIGHT_MID, 20, 0);               /* 设置位置 */

    /* 音量图标 */
    lv_obj_t *sound_label = lv_label_create(lv_scr_act());                              /* 创建音量标签 */
    lv_label_set_text(sound_label, LV_SYMBOL_VOLUME_MAX);                               /* 设置文本内容：音量图标 */
    lv_obj_set_style_text_font(sound_label, &lv_font_montserrat_20, LV_STATE_DEFAULT);  /* 设置字体 */
    lv_obj_align_to(sound_label, slider, LV_ALIGN_OUT_LEFT_MID, -20, 0);                /* 设置位置 */
}


/*************************  第二部分 消息框  ******************************/

/**
 * @brief  消息框事件回调
 * @param  *e ：事件相关参数的集合，它包含了该事件的所有数据
 * @return 无
 */
static void msgbox_event_cb(lv_event_t *e)
{
    lv_obj_t *target = lv_event_get_current_target(e);                 /* 获取当前触发源 */

    if(lv_msgbox_get_active_btn(target) == 2)                          /* 获取按钮索引 */
    {
        lv_obj_add_flag(msgbox, LV_OBJ_FLAG_HIDDEN);                   /* 隐藏消息框 */
    }
}

/**
 * @brief  消息框实例
 * @param  无
 * @return 无
 */
static void lv_example_msgbox(void)
{
    static const char *btns[] = { " ", " ", "OK", "" };

    /* 消息框整体 */
    msgbox = lv_msgbox_create(lv_scr_act(),LV_SYMBOL_WARNING " Notice","Excessive volume may damage hearing.", btns,false);
    lv_obj_set_size(msgbox, 300, 170);                                                       /* 设置大小 */
    lv_obj_center(msgbox);                                                                   /* 设置位置 */
    lv_obj_set_style_border_width(msgbox, 0, LV_STATE_DEFAULT);                              /* 去除边框 */
    lv_obj_set_style_shadow_width(msgbox, 20, LV_STATE_DEFAULT);                             /* 设置阴影宽度 */
    lv_obj_set_style_shadow_color(msgbox, lv_color_hex(0xa9a9a9), LV_STATE_DEFAULT);         /* 设置阴影颜色 */
    lv_obj_set_style_pad_top(msgbox,18,LV_STATE_DEFAULT);                                    /* 设置顶部填充 */
    lv_obj_set_style_pad_left(msgbox,20,LV_STATE_DEFAULT);                                   /* 设置左侧填充 */
    lv_obj_add_event_cb(msgbox, msgbox_event_cb, LV_EVENT_VALUE_CHANGED, NULL);              /* 添加事件 */

    /* 消息框标题 */
    lv_obj_t *title = lv_msgbox_get_title(msgbox);                                           /* 获取标题部分 */
    lv_obj_set_style_text_font(title, &lv_font_montserrat_20, LV_STATE_DEFAULT);             /* 设置字体 */
    lv_obj_set_style_text_color(title, lv_color_hex(0xff0000),LV_STATE_DEFAULT);             /* 设置文本颜色：红色 */

    /* 消息框主体 */
    lv_obj_t *content = lv_msgbox_get_content(msgbox);                                       /* 获取主体部分 */
    lv_obj_set_style_text_font(content, &lv_font_montserrat_20, LV_STATE_DEFAULT);           /* 设置字体 */
    lv_obj_set_style_text_color(content, lv_color_hex(0x6c6c6c), LV_STATE_DEFAULT);          /* 设置文本颜色：灰色 */
    lv_obj_set_style_pad_top(content,15,LV_STATE_DEFAULT);                                   /* 设置顶部填充 */

    /* 消息框按钮 */
    lv_obj_t *btn = lv_msgbox_get_btns(msgbox);                                              /* 获取按钮矩阵部分 */
    lv_obj_set_style_bg_opa(btn, 0, LV_PART_ITEMS);                                          /* 设置按钮背景透明度 */
    lv_obj_set_style_shadow_width(btn, 0, LV_PART_ITEMS);                                    /* 去除按钮阴影 */
    lv_obj_set_style_text_font(btn, &lv_font_montserrat_20, LV_PART_ITEMS);                  /* 设置字体 */
    lv_obj_set_style_text_color(btn, lv_color_hex(0x2271df),LV_PART_ITEMS);                  /* 设置文本颜色（未按下）：蓝色 */
    lv_obj_set_style_text_color(btn, lv_color_hex(0xff0000),LV_PART_ITEMS|LV_STATE_PRESSED); /* 设置文本颜色（已按下）：红色 */

    lv_obj_add_flag(msgbox, LV_OBJ_FLAG_HIDDEN);                                             /* 隐藏消息框 */
}

/**
 * @brief  LVGL演示
 * @param  无
 * @return 无
 */
void lv_mainstart(void)
{
    lv_example_slider();
    lv_example_msgbox();
}
```

![image-20250412164318523](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504121643769.png)

# 微调器部件lv_spinbox

数字文本，用于微调数据

## 组成部分

- 主体LV_PART_MAIN
- 光标LV_PART_CURSOR

## 创建&设置样式 

![image-20250412170504575](C:\Users\a1874\AppData\Roaming\Typora\typora-user-images\image-20250412170504575.png)

```c
static void my_event1_cb(lv_event_t *e)
{

	lv_spinbox_increment(spinbox);
}

static void my_event2_cb(lv_event_t *e)
{
	lv_spinbox_decrement(spinbox);
}	

	spinbox = lv_spinbox_create(lv_scr_act());
	lv_obj_center(spinbox);
	
	lv_obj_t *btn1 = lv_btn_create(lv_scr_act());//创建递增按钮
	lv_obj_align_to(btn1,spinbox,LV_ALIGN_OUT_RIGHT_MID,10,0);//对齐
	lv_obj_add_event_cb(btn1,my_event1_cb,LV_EVENT_CLICKED,NULL);
	lv_obj_set_style_bg_img_src(btn1, LV_SYMBOL_PLUS, LV_PART_MAIN);//设置背景图标
	
	lv_obj_t *btn2 = lv_btn_create(lv_scr_act());//创建递减按钮
	lv_obj_align_to(btn2,spinbox,LV_ALIGN_OUT_LEFT_MID,-10,0);//对齐
	lv_obj_add_event_cb(btn2,my_event2_cb,LV_EVENT_CLICKED,NULL);
	lv_obj_set_style_bg_img_src(btn2, LV_SYMBOL_MINUS, LV_PART_MAIN);//设置背景图标
```

## 设置

```c
	//lv_spinbox_set_step(spinbox,10);//设置步进值,该函数会与设置光标位置的函数冲突
	lv_spinbox_set_range(spinbox,-1000,1000);//设置范围值
	
	lv_spinbox_set_value(spinbox,500);//设置当前值
	lv_spinbox_set_digit_format(spinbox,4,2);//设置位数，小数点位置（只是显示出来小数点，不表是当前数是小数）
	lv_spinbox_set_pos(spinbox,3);//设置光标位置，最右边是0
	lv_spinbox_get_value(spinbox);//返回的是整数而非小数
```

# 表格部件lv_table

由一个个单元格组成，只能存放文本形式的内容

## 组成部分

- 主体LV_PART_MAIN
- 单元格LV_PART_ITEMS

## 创建&设置样式

![image-20250412171421056](https://raw.githubusercontent.com/ZhangZhen-huia/Note/main/img/202504121714281.png)

```c
	lv_obj_t *table = lv_table_create(lv_scr_act());
	lv_table_set_col_width(table,2,50);//设置列宽,id（从左往右，从0开始），宽度
```

## 设置行列

```c
	lv_table_set_col_width(table,2,50);//设置列宽,id（从左往右，从0开始），宽度
	lv_table_set_row_cnt(table,3);//设置行数
	lv_table_set_col_cnt(table,3);//设置列数
	lv_table_set_cell_value(table,1,0,"200");//行，列，内容
	lv_table_set_cell_value_fmt(table,2,0,"%s","hallo");//行，列，内容
```

